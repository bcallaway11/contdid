---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# contdid

<!-- badges: start -->
<!-- badges: end -->

An R package for difference-in-differences with a continuous treatment.

## Installation

You can install the development version of contdid from [GitHub](https://github.com/) with:

```{r}
# install.packages("devtools")
devtools::install_github("bcallaway11/contdid")
```

## Example

This is a basic example which shows you how to solve a common problem:

```{r example}
library(contdid)

devtools::load_all("~/Dropbox/contdid")
# Simulate data
set.seed(123)
sp <- did::reset.sim()
df <- did::build_sim_dataset(sp)
n <- length(unique(df$id))
D <- runif(n, 0, 1)
# make some untreated units
df$D <- BMisc::time_invariant_to_panel(D, df, "id")
# df$D <- df$D * (df$period >= df$G) * (df$G != 0)
# df <- df[, c("id", "period", "Y", "D")]
cd_res <- cont_did(
  yname = "Y",
  tname = "period",
  idname = "id",
  dname = "D",
  data = df,
  gname = "G",
  target_parameter = "slope",
  aggregation = "dose",
  treatment_type = "continuous",
  control_group = "notyettreated",
  biters = 10,
  cl = 10,
  knots = 3,
  degree = 3
)

ggpte(cd_res)
```
